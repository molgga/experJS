<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>experJS\ui\EXScrollView.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/define.html">define</a></li>
            
                <li><a href="..&#x2F;classes/EX.html">EX</a></li>
            
                <li><a href="..&#x2F;classes/EXBrowser.html">EXBrowser</a></li>
            
                <li><a href="..&#x2F;classes/EXCheckBox.html">EXCheckBox</a></li>
            
                <li><a href="..&#x2F;classes/EXCheckBox.CheckBox.html">EXCheckBox.CheckBox</a></li>
            
                <li><a href="..&#x2F;classes/EXCompare.html">EXCompare</a></li>
            
                <li><a href="..&#x2F;classes/EXCookie.html">EXCookie</a></li>
            
                <li><a href="..&#x2F;classes/EXCustomEvent.html">EXCustomEvent</a></li>
            
                <li><a href="..&#x2F;classes/EXEasing.html">EXEasing</a></li>
            
                <li><a href="..&#x2F;classes/EXElement.html">EXElement</a></li>
            
                <li><a href="..&#x2F;classes/EXEvent.html">EXEvent</a></li>
            
                <li><a href="..&#x2F;classes/EXEventListener.html">EXEventListener</a></li>
            
                <li><a href="..&#x2F;classes/EXJsonLoader.html">EXJsonLoader</a></li>
            
                <li><a href="..&#x2F;classes/EXLoader.html">EXLoader</a></li>
            
                <li><a href="..&#x2F;classes/EXMath.html">EXMath</a></li>
            
                <li><a href="..&#x2F;classes/EXRadioButton.html">EXRadioButton</a></li>
            
                <li><a href="..&#x2F;classes/EXRadioButton.RadioButton.html">EXRadioButton.RadioButton</a></li>
            
                <li><a href="..&#x2F;classes/EXScrollViewY.html">EXScrollViewY</a></li>
            
                <li><a href="..&#x2F;classes/EXScrollViewY.UI_Bar.html">EXScrollViewY.UI_Bar</a></li>
            
                <li><a href="..&#x2F;classes/EXSelectBox.html">EXSelectBox</a></li>
            
                <li><a href="..&#x2F;classes/EXSelectBox.SelectBox.html">EXSelectBox.SelectBox</a></li>
            
                <li><a href="..&#x2F;classes/EXSelectBox.SelectBoxOption.html">EXSelectBox.SelectBoxOption</a></li>
            
                <li><a href="..&#x2F;classes/EXSelectBox.SelectBoxOptionGroup.html">EXSelectBox.SelectBoxOptionGroup</a></li>
            
                <li><a href="..&#x2F;classes/EXString.html">EXString</a></li>
            
                <li><a href="..&#x2F;classes/EXTextLoader.html">EXTextLoader</a></li>
            
                <li><a href="..&#x2F;classes/EXTimer.html">EXTimer</a></li>
            
                <li><a href="..&#x2F;classes/EXTiming.html">EXTiming</a></li>
            
                <li><a href="..&#x2F;classes/EXToast.html">EXToast</a></li>
            
                <li><a href="..&#x2F;classes/EXTransform.html">EXTransform</a></li>
            
                <li><a href="..&#x2F;classes/EXTween.html">EXTween</a></li>
            
                <li><a href="..&#x2F;classes/EXURLRequest.html">EXURLRequest</a></li>
            
                <li><a href="..&#x2F;classes/EXValidator.html">EXValidator</a></li>
            
                <li><a href="..&#x2F;classes/EXXmlLoader.html">EXXmlLoader</a></li>
            
                <li><a href="..&#x2F;classes/require.html">require</a></li>
            
                <li><a href="..&#x2F;classes/requirejs.html">requirejs</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: experJS\ui\EXScrollView.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define(function(require, exports){
	
	var EXEventListener = (EXEventListener == undefined) ? require(&quot;..&#x2F;..&#x2F;experJS&#x2F;events&#x2F;EXEventListener&quot;) : EXEventListener;
	var EXCustomEvent = (EXCustomEvent == undefined) ? require(&quot;..&#x2F;..&#x2F;experJS&#x2F;events&#x2F;EXCustomEvent&quot;) : EXCustomEvent;
	var EXElement = (EXElement == undefined) ? require(&quot;..&#x2F;..&#x2F;experJS&#x2F;utils&#x2F;EXElement&quot;) : EXElement;
	var EXBrowser = (EXBrowser == undefined) ? require(&quot;..&#x2F;..&#x2F;experJS&#x2F;utils&#x2F;EXBrowser&quot;) : EXBrowser;
	var EXTween = (EXTween == undefined) ? require(&quot;..&#x2F;..&#x2F;experJS&#x2F;transitions&#x2F;EXTween&quot;) : EXTween;

	var EVENT_BAR_SCROLLING = &quot;ScrollViewY.EVENT_BAR_SCROLLING&quot;;

	&#x2F;*
	css&#x2F;experCSS&#x2F;exper.css
	에 지정된 공통 타입 UI 등을 생성, query 하기 위한 class || id 명 입니다.
	*&#x2F;
	var ClassOf = {
		UI_BAR_CONTAINER : &quot;exUIKit_scrollView&quot;
		, UI_BAR_CONTAINER_DISABLE : &quot;disable&quot;
		, UI_BAR_CONTAINER_NEEDLESS : &quot;needless&quot;
		, UI_BAR : &quot;uiBar&quot;
		, UI_BAR_ACTIVATE : &quot;activate&quot;
		, UI_ARROW_UP : &quot;uiArrow up&quot;
		, UI_ARROW_DOWN : &quot;uiArrow down&quot;
	}

	var _isIE9 = false;
	
	&#x2F;**
	@class EXScrollViewY
	@constructor
	*&#x2F;
	var EXScrollViewY = function(){
		var _this = this;

		var SMOOTH_SCROLLING = 0.2;
		var WHEEL_SPACE = 0;

		var _scrollContainer = null;
		var _scrollContent = null;

		var _maxScrollY = 0;

		var _scrollTargetY = 0;

		var _isScrolling = false;
		var _scrollInterval = null;

		var _delegateWheelObject = null;

		&#x2F;**
		@property uiScrollBar
		@type {EXScrollViewY.UI_Bar}
		*&#x2F;
		_this.uiScrollBar = null;

		&#x2F;**
		EXScrollViewY 인스턴스를 초기화 합니다.
		@method init
		@param scrollContainer {HTMLElement}
		@param scrollContent {HTMLElement}
		@return {void}
		*&#x2F;
		_this.init = function( scrollContainer , scrollContent ){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY&quot; , &quot;init&quot;);
			if(EXEventListener.isTouchAble() == false) EXEventListener.setTouchAble(true);
			_scrollContainer = scrollContainer;
			_scrollContent = scrollContent;
			_isIE9 = EXBrowser.isIE9;

			_maxScrollY = _scrollContainer.offsetHeight - _scrollContent.offsetHeight;
			_scrollContainer.style.position = &quot;relative&quot;;

			WHEEL_SPACE = Math.floor((_scrollContainer.offsetHeight)&#x2F;3);

			var parseScrollY = parseFloat(_scrollContent.style.top);
			_scrollContent.style.position = &quot;absolute&quot;;
			_scrollContent.style.top = &quot;0px&quot;;
			_scrollContent.style.left = &quot;0px&quot;;

			_this.uiScrollBar = new EXScrollViewY.UI_Bar();
			_this.uiScrollBar.init( _scrollContainer , _maxScrollY);

			_scrollContainer.appendChild(_this.uiScrollBar.getBarContainer());

			_this.uiScrollBar.initComplete();

			if(parseScrollY == 0 || isNaN(parseScrollY)){
			}else{
				_scrollTargetY = parseScrollY;
				_scrollContent.style.top = _scrollTargetY + &quot;px&quot;;
				_this.uiScrollBar.setScrollPercent(_scrollTargetY&#x2F;_maxScrollY);
				_this.calculateScrollingY(0);
			}

			if(_maxScrollY &lt; 0){
				EXEventListener.add( _scrollContainer , &quot;touchstart&quot; , scrollContainerEventHandler);
				EXEventListener.add( _scrollContainer , &quot;touchend&quot; , scrollContainerEventHandler);
				EXEventListener.add( _scrollContainer , &quot;mousewheel&quot; , scrollContainerEventHandler );
				EXEventListener.add( _scrollContainer , EVENT_BAR_SCROLLING , scrollContainerEventHandler );
			}

			&#x2F;&#x2F;EXEventListener.add( window , &quot;keydown&quot; , function(evt){
				&#x2F;&#x2F;console.log(evt.shiftKey)
			&#x2F;&#x2F;});

			_this.setScrollInterval(true);
			_this.uiScrollBar.show(false);
		};

		function scrollContainerEventHandler(evt){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY scrollContainerEventHandler&quot; , evt.type);
			switch(evt.type){
				case &quot;touchstart&quot; :
					EXBrowser.setDragSelectAble(false);
					EXEventListener.add( _scrollContainer , &quot;touchmove&quot; , scrollContainerEventHandler);
					EXEventListener.add( document , &quot;touchmove&quot; , scrollContainerEventHandler);
					if(_delegateWheelObject != null){
						EXEventListener.add( _delegateWheelObject , &quot;touchmove&quot; , scrollContainerEventHandler );
					}
					break;

				case &quot;touchmove&quot; :
					if(_this.uiScrollBar.isMouseDown == false){
						evt.preventDefault();
						_this.calculateScrollingY(evt.touchMoveY&#x2F;10 , false);
					}
					break;

				case &quot;touchend&quot; :
					EXBrowser.setDragSelectAble(true);
					EXEventListener.remove( _scrollContainer , &quot;touchmove&quot; , scrollContainerEventHandler);
					EXEventListener.remove( document , &quot;touchmove&quot; , scrollContainerEventHandler);
					if(_delegateWheelObject != null){
						EXEventListener.remove( _delegateWheelObject , &quot;touchmove&quot; , scrollContainerEventHandler );
					}
					break;

				case &quot;mousewheel&quot; :
					evt.preventDefault();
					if(_isIE9 == false){
						_this.calculateWheelScrolling(evt.delta , evt.shiftKey , evt.altKey);
					}else{
						_this.calculateWheelScrolling(evt.wheelDelta , evt.shiftKey , evt.altKey);
					}
					break;

				case EVENT_BAR_SCROLLING :
					var movePercent = evt.dataObject.movePercent;
					var moveCalculate = _maxScrollY*movePercent-parseFloat( _scrollContent.style.top );
					_this.calculateScrollingY(moveCalculate , false);
					break;
			}
		};

		&#x2F;**
		iframe 과 같이 한 화면에 다른 문서의 scroll 을 제어해야 할 경우 wheel 이벤트의 delegate 를 지정하여 이벤트를 ScrollViewY 와 연결합니다.
		@method delegateWheelEvent
		@param delegateWheelObject {DOM}
		@return {void}
		*&#x2F;
		_this.delegateWheelEvent = function(delegateWheelObject){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY delegateWheelEvent&quot;);
			if(_delegateWheelObject != null){
				EXEventListener.remove( delegateWheelObject , &quot;mousewheel&quot; , scrollContainerEventHandler );
				EXEventListener.remove( _delegateWheelObject , &quot;touchstart&quot; , scrollContainerEventHandler );
				EXEventListener.remove( _delegateWheelObject , &quot;touchend&quot; , scrollContainerEventHandler );
				_delegateWheelObject = null;
			}
			_delegateWheelObject = delegateWheelObject;
			if(_isIE9 == false){
				EXEventListener.add( _delegateWheelObject , &quot;mousewheel&quot; , scrollContainerEventHandler );
				EXEventListener.add( _delegateWheelObject , &quot;touchstart&quot; , scrollContainerEventHandler );
				EXEventListener.add( _delegateWheelObject , &quot;touchend&quot; , scrollContainerEventHandler );
			}else{
				_delegateWheelObject.onmousewheel = scrollContainerEventHandler;
			}
		};

		&#x2F;**
		delegate 가 iframe 일 경우 크로스 브라우징 처리를 EXScrollViewY 클래스 내부에서 해줍니다.
		@method delegateWheelEventForIframe
		@param iframe {DOM}
		@return {void}
		*&#x2F;
		var _delegateIframe = null;
		_this.delegateWheelEventForIframe = function(iframe){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY delegateWheelEventForIframe&quot;);
			_delegateIframe = iframe;
			var delegate = null;
			var delegateDocument = null;

			if(iframe.contentDocument){
				delegateDocument = iframe.contentDocument;
				delegate = delegateDocument.body;
			}else if(iframe.contentWindow){
				delegateDocument = iframe.contentWindow.document;
				delegate = delegateDocument.body;
			}
			_this.delegateWheelEvent(delegate);
			_this.uiScrollBar.setDelegateDocument(delegateDocument);
		};


		&#x2F;**
		mouse wheel 이벤트의 delta 값을 이용해 스크롤 합니다.
		@method calculateWheelScrolling
		@param delta {integer}
		@return {void}
		*&#x2F;
		_this.calculateWheelScrolling = function(delta , booster , maxScroll){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY calculateWheelScrolling&quot;);
			var scroll = WHEEL_SPACE;
			if(delta &lt; 0){
				scroll = -WHEEL_SPACE;
			}
			if(booster == true){
				scroll = scroll*5;
				if(maxScroll == true){
					scroll = scroll*10000;
				}
			}
			_this.calculateScrollingY(scroll);
		};

		_this.setPositionY = function(positionY){
			_scrollTargetY = positionY;
		};

		&#x2F;**
		지정된 값 만큼 스크롤 합니다.
		@method calculateScrollingY
		@param calculate {number}
		@return {void}
		*&#x2F;
		_this.calculateScrollingY = function(calculate , smooth){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY calculateScrollingY&quot;);
			var currentPositionTop = parseFloat( _scrollContent.style.top );
			var targetPositionTop = currentPositionTop + calculate;
			if(targetPositionTop &gt;= _maxScrollY &amp;&amp; targetPositionTop &lt;= 0){
				_scrollTargetY = targetPositionTop;
			}else{
				if(targetPositionTop &lt; _maxScrollY){
					_scrollTargetY = _maxScrollY;
				}
				if(targetPositionTop &gt; 0){
					_scrollTargetY = 0;
				}
			}
			if(smooth == false){
				_scrollContent.style.top = _scrollTargetY + &quot;px&quot;;
				_this.uiScrollBar.setScrollPercent(_scrollTargetY&#x2F;_maxScrollY);
			}else{
				_this.setScrollInterval(true);
			}
			&#x2F;&#x2F;_this.uiScrollBar.show(true);
		};

		&#x2F;**
		스크롤을 부드럽고 자연스럽게 연출하기 위한 메소드 입니다.
		@method smoothScrollIntervaling
		@return {void}
		*&#x2F;
		_this.smoothScrollIntervaling = function(){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY smoothScrollIntervaling&quot;);
			&#x2F;&#x2F;console.log(_this.uiScrollBar);
			var targetY = parseFloat( _scrollContent.style.top );
			if(_scrollTargetY != targetY){
				&#x2F;&#x2F;targetY += 0.1*(Math.ceil(_scrollTargetY - targetY));
				targetY += SMOOTH_SCROLLING*(Math.ceil(_scrollTargetY - targetY));
				if(Math.abs(_scrollTargetY - targetY) &lt; 1){
					targetY = _scrollTargetY;
					&#x2F;&#x2F;_this.uiScrollBar.show(false);
				}
				_scrollContent.style.top = targetY + &quot;px&quot;;
				_this.uiScrollBar.setScrollPercent(targetY&#x2F;_maxScrollY);
			}else{
				_this.setScrollInterval(false);
			}
		}

		&#x2F;**
		스크롤을 부드럽고 자연스럽게 연출하기 위해 사용되는 interval 을 중지, 시작 제어를 합니다.
		@method setScrollInterval
		@param bool {boolean}
		@return {void}
		*&#x2F;
		_this.setScrollInterval = function(bool){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY setScrollInterval&quot;);
			if(bool == true){
				if(_scrollInterval != null){
					clearInterval(_scrollInterval);
					_scrollInterval = null;
				}
				_scrollInterval = setInterval(_this.smoothScrollIntervaling , 20);
				&#x2F;&#x2F;_this.uiScrollBar.show(true);
			}else{
				clearInterval(_scrollInterval);
				_scrollInterval = null;
				&#x2F;&#x2F;_this.uiScrollBar.show(false);
			}
		}

		&#x2F;**
		EXScrollViewY 인스턴스를 파기 합니다.
		@method destroy
		@return {void}
		*&#x2F;
		_this.destroy = function(){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY&quot; , &quot;destroy&quot;);
			try{
				&#x2F;&#x2F;_this.setScrollInterval(false);

				EXEventListener.remove( document , &quot;touchmove&quot; , scrollContainerEventHandler);
				if(_scrollInterval != null){
					clearInterval(_scrollInterval);
					_scrollInterval = null;
				}

				if(_delegateWheelObject != null){
					if(_isIE9 == false){
						EXEventListener.remove( _delegateWheelObject , &quot;mousewheel&quot; , scrollContainerEventHandler );
						EXEventListener.remove( _delegateWheelObject , &quot;touchstart&quot; , scrollContainerEventHandler );
						EXEventListener.remove( _delegateWheelObject , &quot;touchend&quot; , scrollContainerEventHandler );
					}else{
						_delegateWheelObject.onmousewheel = null;
					}
					_delegateWheelObject = null;
				}
				if(_scrollContainer != null){
					EXEventListener.remove( _scrollContainer , &quot;touchstart&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;touchmove&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;touchend&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;mousewheel&quot; , scrollContainerEventHandler );
					EXEventListener.remove( _scrollContainer , EVENT_BAR_SCROLLING , scrollContainerEventHandler );
					_scrollContainer.removeChild(_this.uiScrollBar.getBarContainer());
					_scrollContainer = null;
				}
				if(_this.uiScrollBar != null){
					_this.uiScrollBar.destroy();
					_this.uiScrollBar = null;
				}
			}catch(e){
				EX.debug(&quot;######## EXScrollViewY&quot; , &quot;destroy&quot; , e);
			}
		};
	};
	
	&#x2F;**
	EXScrollViewY 에 사용되는 스크롤 Bar UI
	@class EXScrollViewY.UI_Bar
	@constructor
	*&#x2F;
	EXScrollViewY.UI_Bar = function(){
		var _scrollBar = this;
		var _uiBarContainer = null;
		var _uiBar = null;
		var _isShow = false;
		var _ableShow = true;
		var _scrollContainer = 0;
		var _scrollContainerOffsetHeight = 0;
		var _uiBarHeight = 0;
		
		var _tempMaxY = 0;
		var _minScrollY = 0;
		var _maxScrollY = 0;
		var _scrollingClientY = 0;
		var _scrollingPositionY = 0;
		var _scrollingClinetPercentY = 0;

		var _uiArrowUp = null;
		var _uiArrowDown = null;

		var _currentScrollPercentY = 0;

		var _delegateDocument = null;

		&#x2F;**
		@property isMouseDown
		@type {boolean}
		@default false
		*&#x2F;
		_scrollBar.isMouseDown = false;
		
		&#x2F;**
		@property isMouseOver
		@type {boolean}
		@default false
		*&#x2F;
		_scrollBar.isMouseOver = false;

		&#x2F;**
		EXScrollViewY.UI_Bar 인스턴스를 초기화 합니다.
		@method init
		@param scrollContainer {HTMLElement}
		@param maxY {number}
		@return {void}
		*&#x2F;
		_scrollBar.init = function(scrollContainer , maxY ){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;init&quot;);
			_scrollContainer = scrollContainer;
			_tempMaxY = maxY;

			_uiBarContainer = document.createElement(&quot;div&quot;);
			_uiBar = document.createElement(&quot;div&quot;);
			_uiArrowUp = document.createElement(&quot;div&quot;);
			_uiArrowDown = document.createElement(&quot;div&quot;);

			_uiBarContainer.className = ClassOf.UI_BAR_CONTAINER;
			_uiBar.className = ClassOf.UI_BAR;
			_uiArrowUp.className = ClassOf.UI_ARROW_UP;
			_uiArrowDown.className = ClassOf.UI_ARROW_DOWN;

			_uiBarContainer.appendChild(_uiArrowDown);
			_uiBarContainer.appendChild(_uiArrowUp);
			_uiBarContainer.appendChild(_uiBar);

		};

		_scrollBar.initComplete = function(){
			_scrollContainerOffsetHeight = _scrollContainer.offsetHeight;
			_uiBarHeight = Math.floor( _scrollContainerOffsetHeight * Math.abs(_scrollContainerOffsetHeight&#x2F;(_scrollContainerOffsetHeight - _tempMaxY)));
			if(_uiBarHeight &lt; 20 ) _uiBarHeight = 20;
			_maxScrollY = (_scrollContainerOffsetHeight - _uiBarHeight) - _uiArrowUp.offsetHeight - _uiArrowDown.offsetHeight;&#x2F;&#x2F; - 0;
			_minScrollY = _uiArrowUp.offsetHeight;

			try{
				_uiBarContainer.style.height = _scrollContainerOffsetHeight+&quot;px&quot;;
				_uiBar.style.height = _uiBarHeight +&quot;px&quot;;
				_uiBar.style.top = _minScrollY +&quot;px&quot;;
			}catch(e){
			}
			
			if(_maxScrollY &lt;= 0 ){
				EXElement.addClass( _uiBarContainer , ClassOf.UI_BAR_CONTAINER_NEEDLESS );
			}else{
				EXEventListener.add( _uiBar , &quot;mouseup&quot; , interactionBarMouseEventHandler);
				EXEventListener.add( _uiBar , &quot;mousedown&quot; , interactionBarMouseEventHandler);

				EXEventListener.add( _uiArrowUp , &quot;mousedown&quot; , interactionArrowMouseEventHandler);
				EXEventListener.add( _uiArrowUp , &quot;mouseup&quot; , interactionArrowMouseEventHandler);
				EXEventListener.add( _uiArrowDown , &quot;mousedown&quot; , interactionArrowMouseEventHandler);
				EXEventListener.add( _uiArrowDown , &quot;mouseup&quot; , interactionArrowMouseEventHandler);
				
				EXEventListener.add( _uiBarContainer , &quot;mousedown&quot; , interactionContainerMouseEventHandler);
			}
		};

		function interactionContainerMouseEventHandler(evt){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;interactionContainerMouseEventHandler&quot;);
			if(_scrollBar.isMouseDown == false){
				var half = _scrollContainerOffsetHeight - _uiBarHeight;
				var mouseY = evt.pageY - EXElement.getElementGlobalPositionY(_uiBarContainer);
				var fixPercent = (mouseY - _uiBarHeight&#x2F;2)&#x2F;half;
				_scrollBar.requestScrollPercent(fixPercent);
			}
		}

		function interactionArrowMouseEventHandler(evt){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;interactionArrowMouseEventHandler&quot;);
			var arrow = evt.currentTarget;
			switch(evt.type){
				case &quot;mousedown&quot; :
					_scrollBar.isMouseDown = true;
					if(arrow == _uiArrowUp){
						_scrollBar.requestScrollPercent( _currentScrollPercentY - 0.2 );
					}else if(arrow == _uiArrowDown){
						_scrollBar.requestScrollPercent( _currentScrollPercentY + 0.2 );
					}
					break;
				case &quot;mouseup&quot; :
					_scrollBar.isMouseDown = false;
					break;
			}
		}

		function interactionBarMouseEventHandler(evt){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;interactionBarMouseEventHandler&quot; , evt.type);
			switch(evt.type){
				case &quot;mouseup&quot; :
					&#x2F;&#x2F;EXElement.removeClass(_uiBar , ClassOf.UI_BAR_ACTIVATE );
					EXElement.removeClass(_uiBarContainer , ClassOf.UI_BAR_ACTIVATE );
					_scrollBar.isMouseDown = false;
					EXEventListener.remove( _scrollContainer , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( _uiBarContainer , &quot;mousemove&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( document , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( document , &quot;mousemove&quot; , interactionBarMouseEventHandler);
					if(_delegateDocument != null){
						EXEventListener.remove( _delegateDocument , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					}
					EXBrowser.setDragSelectAble(true);
					break;
				case &quot;mousedown&quot; :
					&#x2F;&#x2F;EXElement.addClass(_uiBar , ClassOf.UI_BAR_ACTIVATE );
					EXElement.addClass(_uiBarContainer , ClassOf.UI_BAR_ACTIVATE );
					_scrollBar.isMouseDown = true;
					_scrollingClientY = evt.clientY;
					_scrollingClinetPercentY = _scrollingPositionY&#x2F;_maxScrollY;
					EXEventListener.add( _scrollContainer , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					EXEventListener.add( document , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					EXEventListener.add( document , &quot;mousemove&quot; , interactionBarMouseEventHandler);
					if(_delegateDocument != null){
						EXEventListener.add( _delegateDocument , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					}
					EXBrowser.setDragSelectAble(false);
					break;
				case &quot;mousemove&quot; :
					var movePercent = (evt.clientY - _scrollingClientY)&#x2F;_maxScrollY + _scrollingClinetPercentY;
					_scrollBar.requestScrollPercent(movePercent);
					break;
			}
		};
		&#x2F;**
		@method setDelegateDocument
		@param delegate
		@return {void}
		*&#x2F;
		_scrollBar.setDelegateDocument = function(delegate){
			_delegateDocument = delegate;
		}

		&#x2F;**
		EXScrollViewY 에 움직여야 할 scroll 값을 요청합니다.
		@method requestScrollPercent
		@param movePercent {integer}
		@return {void}
		*&#x2F;
		_scrollBar.requestScrollPercent = function(movePercent){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;requestScrollPercent&quot;);
			&#x2F;&#x2F;var movePercent = (layerY-_uiBarHeight&#x2F;2)&#x2F;(_scrollContainerOffsetHeight-_uiBarHeight);
			if(movePercent &lt; 0) movePercent = 0;
			if(movePercent &gt; 1) movePercent = 1;
			EXEventListener.dispatch( _scrollContainer , new EXCustomEvent( EVENT_BAR_SCROLLING , { movePercent: movePercent }));
		}

		&#x2F;**
		EXScrollViewY 에 의해 움직여야할 percent 값을 지정 받습니다.
		@method setScrollPercent
		@param percent {number}
		@return {void}
		*&#x2F;
		_scrollBar.setScrollPercent = function(percent){
			&#x2F;&#x2F;EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;setScrollPercent&quot;);
			var targetY = Math.floor(percent*_maxScrollY) + _minScrollY;
			_uiBar.style.top = targetY+&quot;px&quot;;
			&#x2F;&#x2F;console.log(_uiBar.style.top);
			_scrollingPositionY = targetY;
			_currentScrollPercentY = percent;
		};

		&#x2F;**
		UI Bar 를 visible , hidden 합니다.
		@method show
		@param bool {boolean}
		@return {void}
		*&#x2F;
		_scrollBar.show = function(bool){
			if(_isShow == bool) return;
			if(_ableShow == false) return;
			if(bool == true){
				&#x2F;&#x2F;EXTween.to( _uiBar , 0.3 , { autoOpacity:1 });
			}else{
				&#x2F;&#x2F;EXTween.to( _uiBar , 0.3 , { autoOpacity:0.2 });
			}
			_isShow = bool;
		};

		&#x2F;**
		@method getBarContainer
		@return {HTMLElement}
		*&#x2F;
		_scrollBar.getBarContainer = function(){
			return _uiBarContainer;
		};

		&#x2F;**
		@method getBar
		@return {HTMLElement}
		*&#x2F;
		_scrollBar.getBar = function(){
			return _uiBar;
		};

		&#x2F;**
		UI Bar 를 파기 합니다.
		@method destroy
		@return {void}
		*&#x2F;
		_scrollBar.destroy = function(){
			try{
				EXEventListener.remove( document , &quot;mouseup&quot; , interactionBarMouseEventHandler);
				EXEventListener.remove( document , &quot;mousemove&quot; , interactionBarMouseEventHandler);
				if(_uiBar != null){
					EXEventListener.remove( _uiBar , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( _uiBar , &quot;mousedown&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( _uiBar , &quot;mouseover&quot; , interactionBarMouseEventHandler);
					EXEventListener.remove( _uiBar , &quot;mouseout&quot; , interactionBarMouseEventHandler);
					_uiBar = null;
				}
				if(_scrollContainer != null){
					EXEventListener.remove( _scrollContainer , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					&#x2F;*
					EXEventListener.remove( _scrollContainer , &quot;touchstart&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;touchmove&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;touchend&quot; , scrollContainerEventHandler);
					EXEventListener.remove( _scrollContainer , &quot;mousewheel&quot; , scrollContainerEventHandler );
					EXEventListener.remove( _scrollContainer , EVENT_BAR_SCROLLING , scrollContainerEventHandler );
					*&#x2F;
					_scrollContainer = null;
				}
				if(_delegateDocument != null){
					EXEventListener.remove( _delegateDocument , &quot;mouseup&quot; , interactionBarMouseEventHandler);
					_delegateDocument = null;
				}
				if(_uiBarContainer != null){
					EXEventListener.remove( _uiBarContainer , &quot;mousedown&quot; , interactionContainerMouseEventHandler);
					_uiBarContainer = null;
				}
				if(_uiArrowUp != null){
					EXEventListener.remove( _uiArrowUp , &quot;mousedown&quot; , interactionArrowMouseEventHandler);
					EXEventListener.remove( _uiArrowUp , &quot;mouseup&quot; , interactionArrowMouseEventHandler);
					_uiArrowUp = null;
				}
				if(_uiArrowDown != null){
					EXEventListener.remove( _uiArrowDown , &quot;mousedown&quot; , interactionArrowMouseEventHandler);
					EXEventListener.remove( _uiArrowDown , &quot;mouseup&quot; , interactionArrowMouseEventHandler);
					_uiArrowDown = null;
				}
			}catch(e){
				EX.debug(&quot;EXScrollViewY.UI_Bar&quot; , &quot;destroy&quot; , e);
			}
		};
		return _scrollBar;
	}

	return EXScrollViewY;
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
